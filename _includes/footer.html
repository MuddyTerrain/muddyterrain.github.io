<footer class="footer">
  {% for item in site.data.settings.social %}
    {% assign is_brand = false %}
    {% if item.icon == 'x-twitter' or item.icon == 'linkedin' or item.icon == 'github' or item.icon == 'instagram' %}
      {% assign is_brand = true %}
    {% endif %}

    <a href="{{ item.link }}" class="menu-link" target="_blank">
      <i class="{% if is_brand %}fa-brands{% else %}fa-solid{% endif %} fa-{{ item.icon }}" aria-hidden="true"></i>
    </a>
  {% endfor %}
  <div class="footer-description"><a href="{{ site.github.url }}/">{{ site.title }} | {{ site.description }} </a></div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const trackableLinks = document.querySelectorAll('.track-click');

  trackableLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      // Stop the link from navigating instantly
      e.preventDefault();

      const url = this.href;
      const target = this.target;
      const eventName = this.getAttribute('data-event-name');

      // Function to handle navigation
      const navigate = function() {
        if (target === '_blank') {
          window.open(url, '_blank');
        } else {
          window.location.href = url;
        }
      };

      // Send the event to Google Analytics
      if (eventName) {
        gtag('event', 'navigation_click', {
          'link_text': eventName,
          'link_url': url,
          'event_callback': navigate // <-- THIS IS THE FIX
        });
      } else {
        // If there's no event to track, just navigate immediately
        navigate();
      }
    });
  });
});
</script>